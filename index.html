<!DOCTYPE html>
<html>
	<head>
	<link href="styles.css" rel="stylesheet">
	<script src ='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
	<script src ='message-maker.js'></script>

	<title>Tweetle Me</title>

	</head>
	<body>
		<nav class="navbar navbar-default"><H1>Tweetle Stream</H1></nav>
		<button id='update'>Newest Messages</button>
		<ul class='alltweets'></ul>
		<script>
		$(document).ready(function(){
			var $alltweets = $('.alltweets');
		// tweets to body
			var index = 0;
			while(index <= messages.homepage.length-1){
				var msgInfo = messages.homepage[index];
				var $msgInfo = $('<li class = "tweet">'+
								 '<span class="user">@' + msgInfo.user + '</span>' + 
								 '<span class="message">' + msgInfo.message + '</span>' +
								 '<span class="date" id="'+index+'">' + timeAgo(msgInfo.created_at) + '</span>' +
								 '</li>'
								);
				$msgInfo.prependTo($alltweets);
				index++;
			}
			$('#update').click(function(){
				totalCount = messages.homepage.length-1;
				if(index === totalCount) return;
				while(index <= totalCount){
					var msgInfo = messages.homepage[index];
					var $msgInfo = $('<li class = "tweet">'+
									 '<span class="user">@' + msgInfo.user + '</span>' + 
									 '<span class="message">' + msgInfo.message + '</span>' +
									 '<span class="date" id="'+index+'">' + timeAgo(msgInfo.created_at) + '</span>' +
									 '</li>'
									);
					$msgInfo.hide().prependTo($alltweets).fadeIn(1000);
					index++;
				}
				var timeIndex = 0;
				while(timeIndex <= totalCount){
					$('body').find('#'+timeIndex).text(timeAgo(messages.homepage[timeIndex].created_at));
					timeIndex++;
				}
			});
		});

		</script>
	</body>
<footer>
  <p>Christian Lucas</p>
  <p>Twitter Clone with JQuery and BackboneJS</p>
</footer>
</html>
